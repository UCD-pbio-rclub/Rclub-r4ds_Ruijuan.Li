---
title: "Assignment_05_10_2017"
author: "Ruijuan Li"
date: "5/9/2017"
output: 
  html_document: 
    keep_md: yes
---

# import libs 
```{r}
library(nycflights13)
library(tidyverse)
colnames(flights)
flights$arr_delay
flights$month
?flights
```

# 5.2.4 Exercises
1) Find all flights that 
```{r}
# Had an arrival delay of two or more hours
arr_delay_over_2 <- filter(flights, arr_delay >= 120)
# Flew to Houston (IAH or HOU)
dest_houston <- filter(flights, dest == "IAH" | dest == "HOU")
# Were operated by United, American, or Delta
carrier_UA_AA_DL <- filter(flights, carrier == "UA" | carrier == "AA" | carrier == "DL")
# Departed in summer (July, August, and September)
month_789 <- filter(flights, month == 7 | month == 8 | month == 9)
# Arrived more than two hours late, but didnâ€™t leave late
arr_delay_120_dep_delay_0 <- filter(flights, arr_delay > 120 & dep_delay <= 0)
# Were delayed by at least an hour, but made up over 30 minutes in flight
test <- filter(flights, dep_delay >= 60 & dep_delay-arr_delay > 30) 
# Departed between midnight and 6am (inclusive)
dep_time_midnight_6am <- filter(flights, dep_time >= 0 & dep_time <= 600)
```

2) Another useful dplyr filtering helper is between(). What does it do? Can you use it to simplify the code needed to answer the previous challenges?
```{r}
?between
dep_time_midnight_6am_2 <- filter(flights, between(dep_time, 0, 600)) 
identical(dep_time_midnight_6am, dep_time_midnight_6am_2)
```

3) How many flights have a missing dep_time? What other variables are missing? What might these rows represent?
```{r}
sum(is.na(flights$dep_time))
dep_time_missing <- flights[is.na(flights$dep_time),]
View(dep_time_missing) # dep_delay, arr_time, arr_delay, and air_time are all missing  
```

4) Why is NA ^ 0 not missing? Why is NA | TRUE not missing? Why is FALSE & NA not missing? Can you figure out the general rule? (NA * 0 is a tricky counterexample!) 
```{r}
NA ^ 0 # square 0 of any number is equal to 1 
NA | TRUE # | stands for OR, at least one TRUE leads to TRUE
FALSE & NA # & stands for AND, at least one FALSE leads to FALSE 
# the result of | and & must be "TRUE" or "FALSE"  
```

# 5.3.1 Exercises
1) How could you use arrange() to sort all missing values to the start? (Hint: use is.na()).
```{r}
arrange(flights, desc(is.na(dep_time)), dep_time) # don't understand... 
```

2) Sort flights to find the most delayed flights. Find the flights that left earliest.
```{r}
head(arrange(flights, desc(dep_delay)), 1)
head(arrange(flights, dep_time), 1)
```

3) Sort flights to find the fastest flights.
```{r}
head(arrange(flights, air_time), 1)
```

4) Which flights travelled the longest? Which travelled the shortest?
```{r}
head(arrange(flights, distance), 1)
tail(arrange(flights, distance), 1)
```


